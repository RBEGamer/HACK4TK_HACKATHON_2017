<!-- CTA-Kit: Recommendation -->
<div class="cta-brochure-order recommend">
  <h3 *ngIf="element.headlineHtml" class="headline" [innerHTML]="element.headlineHtml"></h3>

  <div class="pane-container">
    <div
      *ngIf="!element.startWithImage || element.startWithImage == false || (element.startWithImage && currentStep == 0)"
      class="pane" id="intro">
      <div class="pane-content"  *ngIf="currentStep == 1" >
        <figure *ucpIsset="element.imageStepOne">
          <img *ngIf="element.imageStepOne.source" [assetPath]="element.imageStepOne.source" alt="{{element.imageStepOne.altText}}"
               title="{{element.imageStepOne.title}}"/>
        </figure>

        <p *ngIf="element.textPageOneHtml" class="intro-txt" [innerHTML]="element.textPageOneHtml">
        </p>


      </div>
      <div class="pane-content"  *ngIf="currentStep == 2" >
        <figure *ucpIsset="element.imageStepTwo">
          <img *ngIf="element.imageStepTwo.source" [assetPath]="element.imageStepTwo.source" alt="{{element.imageStepTwo.altText}}"
               title="{{element.imageStepTwo.title}}"/>
        </figure>
        <p *ngIf="element.textPageTwoHtml" class="intro-txt" [innerHTML]="element.textPageTwoHtml">
        </p>

      </div>

      <button *ngIf="currentStep == 0" (click)="nextStep()" class="button" type="button">{{element.buttonText}}</button>
    </div>

    <div *ucpIsset="element.document" class="pane pane-hidden">
      <div class="pane-content">
        <figure *ngIf="element.document.image">
          <img *ngIf="element.document.image.source" [assetPath]="element.document.image.source"
               alt="{{element.document.image.altText}}"
               title="{{element.document.image.title}}"/>
        </figure>
        <include-components *ucpIsset="element.document.link" class="pdf-link"
                            [elements]="element.document.link"></include-components>
      </div>
    </div>

    <form *ngIf="currentStep > 0" [formGroup]="recommendationForm" (ngSubmit)="onRecommendation()" class="form">
      <div *ngIf="currentStep == 1" class="pane pane-separator pane-hidde" id="basic-info-form">
        <div class="pane-content">
          <div *ngIf="element.counterStepOne" class="step-bar">
            {{element.counterStepOne}}
          </div>

          <div *ngIf="element.formHeadlineHtml" class="subhead" [innerHTML]="element.formHeadlineHtml"></div>
          <div *ngIf="element.textStepOneHtml" class="row" [innerHTML]="element.textStepOneHtml">
          </div>

          <!-- generischer Ansatz -->
          <div class="row" [class.split-1of2]="nextField.type == 'input'" [class.selectbox]="nextField.type == 'select'"
               *ngFor="let nextField of getFieldsOfPage(element.inputFieldList, currentStep)">
            <ucp-input-field *ngIf="nextField.page == currentStep" [field]="nextField" [parentForm]="recommendationForm"
                             [defaultErrorText]="element.defaultErrorText"></ucp-input-field>
          </div>

          <div class="row">
            <div class="info-txt">
              <p *ngIf="element.mandatoryField" [innerHTML]="element.mandatoryField">
              </p>
            </div>
          </div>

          <button (click)="nextStep()" *ngIf="element.buttonTextStepOne" class="button" type="button">
            {{element.buttonTextStepOne}}
          </button>
        </div>
      </div>

      <div *ngIf="currentStep == 2" class="pane pane-separator pane-hidden" id="address-form"
           data-next="newsletter">
        <div class="pane-content">
          <div *ngIf="element.counterStepTwo" class="step-bar">
            {{element.counterStepTwo}}
          </div>

          <div *ngIf="element.formHeadlineHtml" class="subhead" [innerHTML]="element.formHeadlineHtml"></div>


          <div *ngIf="element.textStepTwoHtml" class="row" [innerHTML]="element.textStepTwoHtml">
          </div>


          <!-- generischer Ansatz -->
          <div class="row" [class.split-1of2]="nextField.type == 'input'"
               *ngFor="let nextField of getFieldsOfPage(element.inputFieldList, currentStep)">
            <ucp-input-field *ngIf="nextField.page == currentStep" [field]="nextField" [parentForm]="recommendationForm"
                             [defaultErrorText]="element.defaultErrorText"></ucp-input-field>
          </div>

          <div class="row">
            <div class="info-txt">
              <p *ngIf="element.mandatoryField" [innerHTML]="element.mandatoryField">
              </p>
            </div>
          </div>

          <div *ngIf="message" class="error-message hidden">{{message}}</div>

          <button *ngIf="element.buttonTextStepTwo" class="button" type="button" (click)="onRecommendation()">
            {{element.buttonTextStepTwo}}
          </button>
        </div>
      </div>
    </form>


    <div *ngIf="currentStep >= 3" class="pane pane-hidden pane-separator"
         id="thank-you-note">
      <div class="pane-content">
        <div *ngIf="element.confirmationHeadlineHtml" class="subhead"
             [innerHTML]="element.confirmationHeadlineHtml"></div>

        <div *ngIf="element.stepConfirmationTextHtml" class="row" [innerHTML]="element.stepConfirmationTextHtml">
        </div>

        <!-- Linklist module without text & headline -->
        <div *ngIf="element.linkList" class="linklist">
          <ul>
            <li *ngFor="let link of element.linkList">
              <include-components [elements]="link"></include-components>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
